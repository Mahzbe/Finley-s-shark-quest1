<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finley's Shark Quest</title>
    <style>
        /* Add your CSS styles here */
    </style>
</head>
<body>
    <canvas id="game-canvas" width="800" height="600"></canvas>
    <div id="start-menu">
        <h1>Finley's Shark Quest</h1>
        <button id="start-button" onclick="startGame()">Start Game</button>
    </div>
    <div id="game-over-screen" style="display: none;">
        <h1>Game Over!</h1>
        <p>Your score: <span id="final-score"></span></p>
        <button id="restart-button" onclick="restartGame()">Restart</button>
    </div>

    <script>
        let game, canvas, ctx;

        function initGame() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            game = {
                level: 0,
                shark: {
                    speed: 1,
                    x: 300,
                    y: 300,
                    width: 50,
                    height: 50
                },
                finley: {
                    x: 50,
                    y: 50,
                    width: 50,
                    height: 50
                },
                score: 0,
                gameOver: false
            };
            console.log("Game initialized.");
        }

        function startGame() {
            console.log("Start game button clicked!");
            document.getElementById("start-menu").style.display = "none";
            initGame();
            gameLoop();
        }

        function updateShark() {
            // Make the shark move toward Finley
            const deltaX = game.finley.x - game.shark.x;
            const deltaY = game.finley.y - game.shark.y;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            // Shark speed determines how quickly it moves toward Finley
            const speed = game.shark.speed * 2; // Adjust speed here if needed
            game.shark.x += (deltaX / distance) * speed;
            game.shark.y += (deltaY / distance) * speed;
        }

        function updateGame() {
            if (game.gameOver) return;

            updateShark();

            if (checkCollision(game.finley, game.shark)) {
                gameOver();
            }
        }

        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Render Finley
            ctx.fillStyle = 'green';
            ctx.fillRect(game.finley.x, game.finley.y, game.finley.width, game.finley.height);

            // Render Shark
            ctx.fillStyle = 'red';
            ctx.fillRect(game.shark.x, game.shark.y, game.shark.width, game.shark.height);

            // Render score
            ctx.fillStyle = 'white';
            ctx.fillText(`Score: ${game.score}`, 10, 10);
        }

        function gameLoop() {
            updateGame();
            render();
            if (!game.gameOver) {
                requestAnimationFrame(gameLoop);
            }
        }

        function gameOver() {
            console.log("Game Over!");
            game.gameOver = true;
            document.getElementById("game-over-screen").style.display = "block";
            document.getElementById("final-score").innerText = game.score;
        }

        function restartGame() {
            console.log("Restarting game...");
            document.getElementById("game-over-screen").style.display = "none";
            initGame();
            gameLoop();
        }

        function checkCollision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.width &&
                   obj1.x + obj1.width > obj2.x &&
                   obj1.y < obj2.y + obj2.height &&
                   obj1.y + obj1.height > obj2.y;
        }

        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowUp':
                    game.finley.y = Math.max(0, game.finley.y - 10);
                    break;
                case 'ArrowDown':
                    game.finley.y = Math.min(canvas.height - game.finley.height, game.finley.y + 10);
                    break;
                case 'ArrowLeft':
                    game.finley.x = Math.max(0, game.finley.x - 10);
                    break;
                case 'ArrowRight':
                    game.finley.x = Math.min(canvas.width - game.finley.width, game.finley.x + 10);
                    break;
            }
        });

        window.onload = () => {
            initGame();
        };
    </script>
</body>
</html>
